<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="btn">test</button>
  </body>
</html>
<script>
  const os = require('os')
  const ifaces = os.networkInterfaces() // 获取本机ip
  let ip = ''

  out: for (let i in ifaces) {
    for (let j in ifaces[i]) {
      let val = ifaces[i][j]
      if (val.family === 'IPv4' && val.address !== '127.0.0.1') {
        ip = val.address
        break out
      }
    }
  }

  let btn = document.getElementById('btn')
  btn.onclick = function () {
    console.log(ip)
    let xhr = new XMLHttpRequest()
    xhr.open('http://111.230.154.177', 'get', ip)
    xhr.send()
  }


  
</script>
